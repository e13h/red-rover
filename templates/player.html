{% extends "base.html" %}

{% block content %}

<!-- Moods -->
<div class="moods">
    <div class="select-mood">
        <label for="moods">Select mood:</label>
        <select class="select-mood" name="moods" id="moods">
            <option value="{{ moods[0] }}" selected>{{ moods[0] }}</option>
            {% for mood in moods[1:] %}
            <option value="{{ mood }}">{{ mood }}</option>
            {% endfor %}
        </select>
    </div>
    </br>
    <form class="moods form-new-mood">
        <div class="form-new-mood">
            <label for="new-mood-name">New mood name:</label>
            <input type="text" name="new-mood-name" id="new-mood-name" required>
        </div>
        <div class="form-new-mood">
            <button class="form-new-mood-submit" value="create">
                Create new mood
            </button>
            <button class="form-new-mood-submit" value="rename">
                Rename current mood
            </button>
        </div>
    </form>
</div>

<!-- Top Tracks -->
<p>
<ul>
    {% for i, track in tracks %}
    <li>
        <img class="track-{{ i }}-image" src="{{ track['image'] }}" width="30px" />
        <button class="track track-{{ i }}" value="{{ track['uri'] }}">
            {{ track["name"] }} - {{ track["artist"] }}
        </button>
    </li>
    {% endfor %}
</ul>
</p>


<!-- Now Playing -->
<div class="now-playing">
    <h2>Now Playing</h2>
    <img class="now-playing-album-art" src="{{ url_for('static', filename='placeholder_album_artwork.png') }}"
        width="300px" />
    <b>
        <p class="now-playing-track-title">Track</p>
    </b>
    <p class="now-playing-track-artist">Artist</p>
</div>


<!-- Controls -->
<div class="now-playing now-playing-controls">
    <button id="play-pause" disabled="true">Loading</button>
    <div style="margin-top: 1em">
        {% for route, label in commands.items() %}
        <button class="command command-{{ route }}" value="{{ route }}">
            {{ label }}
        </button>
        {% endfor %}
    </div>
</div>


<!-- Scripts -->
<script src="https://sdk.scdn.co/spotify-player.js"></script>

<!-- Prevent any sort of caching from happening when we fetch `spotify.js` -->
<script>
    const filename = "{{ url_for('static', filename='spotify.js') }}" + "?v=" + Date.now();
    document.write(`<script type='text/javascript' src='${filename}' access_token='{{ access_token }}'><\/script>`);
</script>

{% endblock %}