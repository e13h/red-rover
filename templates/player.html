{% extends "base.html" %}

{% block content %}

<!-- Top Tracks -->
<p>
<ul>
    {% for i, track in tracks %}
    <li>
        <img class="track-{{ i }}-image" src="{{ track['image'] }}" width="30px">
        <button class="track track-{{ i }}" value="play/{{ track['uri'] }}">
            {{ track["name"] }} - {{ track["artist"] }}
        </button>
    </li>
    {% endfor %}
</ul>
</p>

<!-- Controls -->
<button id="play-pause" disabled="true">Loading</button>

<p>
    {% for route, label in commands.items() %}
    <button class="command command-{{ route }}" value="{{ route }}">
        {{ label }}
    </button>
    {% endfor %}
</p>

<!-- Scripts -->
<script src="https://sdk.scdn.co/spotify-player.js"></script>

<!-- Prevent any sort of caching from happening when we fetch `spotify.js` -->
<script>
    window.spotify_access_token = '{{ access_token }}'
    const filename = "{{ url_for('static', filename='spotify.js') }}"
    document.write("<script type='text/javascript' src='" + filename + "?v=" + Date.now() + "'><\/script>");
</script>

{% endblock %}